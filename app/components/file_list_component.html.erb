<turbo-frame id="file_list" @click.away="file_list = 'close'"
             class="font-sans flex flex-col bg-gray-100 px-2 py-1 lg:w-auto lg:shadow-md lg:mt-2 lg:ml-2 dark:bg-gray-800 lg:dark:mt-0 lg:dark:ml-0"
             data-controller="file-list-component" data-file-list-component-current-value="<%= @file_id %>"> <!-- w-80 -->
  <div id="file_list_header" class="flex flex-row justify-between text-sm font-semibold mb-2 dark:text-gray-200">
    <div class="">
      文件
    </div>
    <div class="flex flex-row justify-between gap-1 text-center">
      <div class="w-8">空白</div>
      <div class="w-8">草稿</div>
      <div class="w-8">校对</div>
      <div class="w-8">完成</div>
    </div>
  </div>

  <% cache @project_files do %>
    <div id="file_list_body" class="overflow-y-scroll hidden-scrollbar mb-2 rounded h-75vh sticky?lg:h-(screen-10dot3)">
      <% @project_files.each do |project_file| %>
        <%= render(FileListItemComponent.new(project_file: project_file)) %>
      <% end %>
    </div>
  <% end %>

  <div class="flex flex-row justify-between gap-2 text-sm mx-4 md:mx-2 dark:text-gray-200">
    <label class="">文件直达</label>
    <div><input type="number" maxlength=3 class="w-12 hidden-arrows rounded dark:bg-gray-500" data-file-list-component-target="gotoFile">.evd.txt</div>
    <button class="rounded-md px-2 border-2 border-blue-300 dark:border-blue-500 bg-indigo-300 dark:bg-indigo-600 font-semibold" data-action="file-list-component#goto">GO</button>
  </div>

  <div id="file_list_nav" class="ml-4 w-80 flex text-sm my-2 items-center justify-between rounded-md lg:w-auto lg:ml-0 dark:text-gray-200" total_pages="<%= @total_pages + 1 %>">
    <div class="w-32 h-8 flex">
      <% unless @page <= 0 %>
        <%= link_to "上一页", "/project_files/#{@file_id}?page=#{@page-1}",
                    class: "border-2 border-blue-300 hover:bg-blue-500 hover:text-white rounded-md py-1 px-2",
                    data: { "turbo-frame": "file_list" } %>
      <% end %>
    </div>
    <div class="w-32 h-8 flex">
    <span class="border-2 border-blue-300 bg-blue-300 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded-md py-1 px-2 object-center">
      <%= @page + 1 %> / <%= @total_pages + 1 %>
    </span>
    </div>
    <div class="w-32 h-8 flex">
      <% unless @page + 1 > @total_pages %>
        <%= link_to "下一页", "/project_files/#{@file_id}?page=#{@page+1}",
                    class: "border-2 border-blue-300 hover:bg-blue-500 hover:text-white rounded-md py-1 px-2",
                    data: { "turbo-frame": "file_list" } %>
      <% end %>
    </div>
  </div>
</turbo-frame>

